! LanceX rule file 
# 非全自动选节点
# 由懒人配置更改而来
# 图标：📮✉️📪📬💫💬💥🔨🥼🚫🔰🙈🍎🎬📺🎱🍐🐝🦁💡🌵🐯🎸💻📽🌏🕹📡🦑🌟🐷🦒🐳🚦📵🎧💊🔓🚦🚥🐼⛔️🈲🌐🎯🖲️🐦🔞🎵📱🚀💳♻️🙈🍱🔂📦🔀⏱
[General]
bypass-system = true
dns-server = 114.114.114.114,8.8.8.8,223.5.5.5,119.29.29.29,1.1.1.1
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local,captive.apple.com,*.ccb.com,*.abchina.com.cn,*.psbc.com,www.baidu.com
tun-excluded-routes = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32,239.255.255.250/32

[Proxy Provider]
ChatGPT = provider-1=香港节点, provider-2=台湾节点, provider-3=日本节点, provider-4=新加坡节点, provider-5=韩国节点, provider-6=美国节点, select=1, type=select
YouTube = provider-1=香港节点, provider-2=台湾节点, provider-3=日本节点, provider-4=新加坡节点, provider-5=韩国节点, provider-6=美国节点, select=1, type=select
Netflix = provider-1=香港节点, provider-2=台湾节点, provider-3=日本节点, provider-4=新加坡节点, provider-5=韩国节点, provider-6=美国节点, select=1, type=select
Disney+ = provider-1=香港节点, provider-2=台湾节点, provider-3=日本节点, provider-4=新加坡节点, provider-5=韩国节点, provider-6=美国节点, select=1, type=select
HBO = provider-1=香港节点, provider-2=台湾节点, provider-3=日本节点, provider-4=新加坡节点, provider-5=韩国节点, provider-6=美国节点, select=1, type=select
Spotify = provider-1=香港节点, provider-2=台湾节点, provider-3=日本节点, provider-4=新加坡节点, provider-5=韩国节点, provider-6=美国节点, select=1, type=select
Telegram = provider-1=香港节点, provider-2=台湾节点, provider-3=日本节点, provider-4=新加坡节点, provider-5=韩国节点, provider-6=美国节点, select=1, type=select
Twitter = provider-1=香港节点, provider-2=台湾节点, provider-3=日本节点, provider-4=新加坡节点, provider-5=韩国节点, provider-6=美国节点, select=1, type=select
Facebook = provider-1=香港节点, provider-2=台湾节点, provider-3=日本节点, provider-4=新加坡节点, provider-5=韩国节点, provider-6=美国节点, select=1, type=select
PayPal = provider-1=香港节点, provider-2=台湾节点, provider-3=日本节点, provider-4=新加坡节点, provider-5=韩国节点, provider-6=美国节点, select=1, type=select
Amazon = provider-1=香港节点, provider-2=台湾节点, provider-3=日本节点, provider-4=新加坡节点, provider-5=韩国节点, provider-6=美国节点, select=1, type=select
苹果服务 = provider-1=香港节点, provider-2=台湾节点, provider-3=日本节点, provider-4=新加坡节点, provider-5=韩国节点, provider-6=美国节点, select=1, type=select
谷歌服务 = provider-1=香港节点, provider-2=台湾节点, provider-3=日本节点, provider-4=新加坡节点, provider-5=韩国节点, provider-6=美国节点, select=1, type=select
微软服务 = provider-1=香港节点, provider-2=台湾节点, provider-3=日本节点, provider-4=新加坡节点, provider-5=韩国节点, provider-6=美国节点, select=1, type=select
哔哩哔哩 = provider-1=香港节点, provider-2=台湾节点, provider-3=日本节点, provider-4=新加坡节点, provider-5=韩国节点, provider-6=美国节点, select=1, type=select
游戏平台 = provider-1=香港节点, provider-2=台湾节点, provider-3=日本节点, provider-4=新加坡节点, provider-5=韩国节点, provider-6=美国节点, select=1, type=select
香港节点 = proxy-filter-regex-1=HK|Hong|hong|香港|深港|沪港|京港|港, type=url-test
台湾节点 = proxy-filter-regex-1=TW|Taiwan|taiwan|台湾|台北|台中|新北|彰化, type=url-test
日本节点 = proxy-filter-regex-1=JP|Japan|japan|Tokyo|tokyo|日本|东京|大阪|京日|苏日|沪日|上日|川日|深日|广日, type=url-test
新加坡节点 = proxy-filter-regex-1=SG|Sing|sing|新加坡|狮城|沪新|京新|深新|杭新|广新, type=url-test
韩国节点 = proxy-filter-regex-1=KR|Korea|korea|KOR|韩国|首尔|韩|韓|春川, type=url-test
美国节点 = proxy-filter-regex-1=US|USA|America|america|United|united|美国|凤凰城|洛杉矶|西雅图|芝加哥|纽约|沪美|美, type=url-test

[Rule]
! -- Matches
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Lan/Lan.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Speedtest/Speedtest.list,PROXY
RULE-SET,https://raw.githubusercontent.com/LaolunsiG/Proxy-configuration-resources/main/rules/Shadowrocket/AI/AI_Globle.list,PROXY, provider=CHATGPT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Apple/Apple.list,PROXY, provider=苹果服务
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Google/Google.list,PROXY, provider=谷歌服务
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Microsoft/Microsoft.list,PROXY, provider=微软服务
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/GitHub/GitHub.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Baidu/Baidu.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Zhihu/Zhihu.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Telegram/Telegram.list,PROXY, provider=TELEGRAM
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Twitter/Twitter.list,PROXY, provider=TWITTER
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Facebook/Facebook.list,PROXY, provider=FACEBOOK
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Weibo/Weibo.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/XiaoHongShu/XiaoHongShu.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/WeChat/WeChat.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Spotify/Spotify.list,PROXY, provider=SPOTIFY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/NetEaseMusic/NetEaseMusic.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/TikTok/TikTok.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/YouTube/YouTube.list,PROXY, provider=YOUTUBE
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Amazon/Amazon.list,PROXY, provider=AMAZON
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Disney/Disney.list,PROXY, provider=DISNEY+
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Netflix/Netflix.list,PROXY, provider=NETFLIX
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/TVB/TVB.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/HBO/HBO.list,PROXY, provider=HBO
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/DouBan/DouBan.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/DouYin/DouYin.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaMedia/ChinaMedia.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/PayPal/PayPal.list,PROXY, provider=PAYPAL
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Steam/Steam.list,PROXY, provider=游戏平台
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/SteamCN/SteamCN.list,PROXY, provider=游戏平台
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Epic/Epic.list,PROXY, provider=游戏平台
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Game/Game.list,PROXY, provider=游戏平台
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Nintendo/Nintendo.list,PROXY, provider=游戏平台
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Sony/Sony.list,PROXY, provider=游戏平台
RULE-SET,https://whatshub.top/rule/Global.list,PROXY
# IP规则
GEOIP,CN,DIRECT
# 兜底规则，表示当其他所有规则都匹配不到时才使用FINAL规则的策略。
FINAL,PROXY




[URL Rewrite]
"(?<=&mcc_mnc=)4" 2 307
"(?<=_region=)CN(?=&)" JP 307
"(^https?:\\\/\\\/*\\.\\w{4}okv.com\\\/.+&.+)(\\d{2}\\.3\\.\\d)(.+)" $118.0$3 302
"^(https?:\\\/\\\/(tnc|dm)[\\w-]+\\.\\w+\\.com\\\/.+)(\\?)(.+)" $1$3 302
"^https?:\/\/(www.)?g.cn" https://www.google.com 302
"^https?:\/\/(www.)?google.cn" https://www.google.com 302

[Script]
# BoxJs安装脚本。
Rewrite: BoxJs = type=http-request,pattern=https?:\/\/boxjs\.(com|net),script-path=https://raw.githubusercontent.com/chavyleung/scripts/master/box/chavy.boxjs.js, requires-body=true, timeout=120

[MitM]
# Shadowrocket仅会解密hostname指定的域名的请求，可以使用通配符。也可以使用前缀 - 排除特定主机名，如 -*.example.com。iOS系统和某些应用有严格的安全策略，仅信任某些特定的证书，对这些域名启动解密可能导致问题，如 *.apple.com，*.icloud.com。
hostname = www.google.cn,*.tiktokv.com,*.byteoversea.com,*.tik-tokapi.com
! ---------------------EOF-----------------------
